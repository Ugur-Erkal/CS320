<!doctype html>
<html lang="en" xmlns:th="http://www.thymeleaf.org"
      th:replace="~{base :: layout(~{::body})}">
<body>

<h2>Manage Restaurant</h2>

<div class="card" th:if="${restaurant != null}">
    <div style="display:flex; gap:12px; align-items:center; flex-wrap:wrap;">
        <b th:text="${restaurant.restaurantName}">Name</b>
        <span>&bull;</span>
        <span th:text="${restaurant.city}">City</span>
        <span th:if="${restaurant.cuisineType != null}">
            <span>&bull;</span>
            <span th:text="${restaurant.cuisineType}">Cuisine</span>
        </span>

        <span style="margin-left:auto;">
            <a class="btn" href="/dashboard">Back to Dashboard</a>
        </span>
    </div>
    <div style="margin-top:6px;">
        <small th:text="${restaurant.address}">Address</small>
    </div>
</div>

<!-- Keywords -->
<div class="card">
    <h3 style="margin-top:0;">Keywords</h3>

    <div th:if="${keywords == null or #lists.isEmpty(keywords)}">
        <p>No keywords yet.</p>
    </div>

    <div th:if="${keywords != null and !#lists.isEmpty(keywords)}" style="display:flex; gap:8px; flex-wrap:wrap;">
        <span th:each="k : ${keywords}" class="card" style="margin:0; padding:6px 10px;"
              th:text="${k}">keyword</span>
    </div>

    <form method="post" th:action="@{/manager/restaurants/{id}/keywords(id=${restaurant.restaurantId})}"
          style="margin-top:12px; display:flex; gap:10px; flex-wrap:wrap;">
        <input type="hidden" th:if="${_csrf != null}"
               th:name="${_csrf.parameterName}" th:value="${_csrf.token}" />
        <input name="keyword" placeholder="Add keyword (e.g., burger)" required/>
        <button class="btn btn-primary" type="submit">Add Keyword</button>
    </form>
</div>

<!-- Menu items -->
<div class="card">
    <h3 style="margin-top:0;">Menu Items</h3>

    <div th:if="${menuItems == null or #lists.isEmpty(menuItems)}">
        <p>No menu items yet.</p>
    </div>

    <div th:if="${menuItems != null and !#lists.isEmpty(menuItems)}">
        <table style="width:100%; border-collapse:collapse;">
            <thead>
            <tr>
                <th style="text-align:left; border-bottom:1px solid #eee; padding:6px;">Name</th>
                <th style="text-align:right; border-bottom:1px solid #eee; padding:6px;">Price</th>
                <th style="text-align:left; border-bottom:1px solid #eee; padding:6px;">Description</th>
            </tr>
            </thead>
            <tbody>
            <tr th:each="mi : ${menuItems}">
                <td style="padding:6px;" th:text="${mi.name}">Name</td>
                <td style="padding:6px; text-align:right;" th:text="${mi.price}">0</td>
                <td style="padding:6px;" th:text="${mi.description}">desc</td>
            </tr>
            </tbody>
        </table>
    </div>

    <h4 style="margin-top:16px;">Add Menu Item</h4>
    <form method="post"
          th:action="@{/manager/restaurants/{id}/menu-items(id=${restaurant.restaurantId})}"
          style="display:grid; gap:10px; grid-template-columns: 1fr 1fr; align-items:end;">
        <input type="hidden" th:if="${_csrf != null}"
               th:name="${_csrf.parameterName}" th:value="${_csrf.token}" />

        <div style="grid-column:1 / span 2;">
            <label>Name</label><br/>
            <input name="name" required style="width:100%;"/>
        </div>

        <div>
            <label>Price</label><br/>
            <input name="price" type="number" step="0.01" min="0.01" required style="width:100%;"/>
        </div>

        <div>
            <label>Image URL (optional)</label><br/>
            <input name="imageUrl" style="width:100%;"/>
        </div>

        <div style="grid-column:1 / span 2;">
            <label>Description (optional)</label><br/>
            <input name="description" style="width:100%;"/>
        </div>

        <div style="grid-column:1 / span 2;">
            <button class="btn btn-primary" type="submit">Add Menu Item</button>
        </div>
    </form>
</div>

</body>
</html>
